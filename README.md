# `syncthing-merge`

`syncthing-merge` automatically merges [conflicts](https://docs.syncthing.net/users/syncing.html#conflicting-changes) generated by [Syncthing](https://syncthing.net/).

## Usage

Environment variables:

| Name | Description |
| `SYNCTHING_MERGE_URL` | The URL at which Syncthing is accessible |
| `SYNCTHING_MERGE_API_KEY` | The Syncthing instance's API key |
| `SYNCTHING_MERGE_FOLDER_ID` | ID of the Syncthing folder to monitor |
| `SYNCTHING_MERGE_FOLDER_NAME` | Name of the Syncthing folder to monitor |
| `SYNCTHING_MERGE_FILE_NAME` | Name of the Syncthing file to monitor |
| [`SYNCTHING_MERGE_PROGRAM`](#syncthing-merge-program) | Path to the program that should perform the merges |

### `SYNCTHING_MERGE_PROGRAM`

The program must take two arguments:

1. The original file
2. The conflicting file

[Syncthing renames the *older* file in a conflicting pair](https://docs.syncthing.net/users/syncing.html#conflicting-changes),
so the program should merge the original file "onto" the conflicting file if merging is not commutative.

The program should clean up by ensuring that the only remaining file is the merged result, which should be renamed to the original file.
